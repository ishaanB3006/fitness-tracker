"use strict";exports.id=871,exports.ids=[871],exports.modules={52871:(e,r,t)=>{t.d(r,{e9:()=>o,getAllMealPlans:()=>c,getMealPlanById:()=>l,getWorkoutById:()=>s});var a=t(80460);let n=null;function i(){return{apiKey:"blt8dfe4b69333e96ec",deliveryToken:"cs7c0d255f1c393b5ea1dd0150",environment:"production"}}let o=async e=>{if(!d)throw Error("Contentstack stack not initialized");let r=await d.contentType("workout").entry(e).includeReference(["exercises.exercise"]).fetch();return console.log(r),r},s=async e=>{try{let r=i();if(!r.apiKey||!r.deliveryToken||!r.environment)throw console.error("Contentstack configuration missing:",r),Error("Contentstack configuration is missing. Please check your environment variables.");let t=`https://cdn.contentstack.io/v3/content_types/workout/entries/${e}`,a=await fetch(`${t}?environment=${r.environment}&include[]=exercises.exercise`,{headers:{api_key:r.apiKey,access_token:r.deliveryToken}});if(!a.ok){if(404===a.status)return console.warn(`Workout ${e} not found in Contentstack`),null;let r=await a.text();throw console.error(`Contentstack API error (${a.status}) for workout ${e}:`,r),Error(`Failed to fetch workout: ${a.status} ${a.statusText}`)}let n=await a.json(),o=n?.entry;if(!o)return null;return function(e){let r=[];e.exercises&&Array.isArray(e.exercises)&&e.exercises.forEach(e=>{e.exercise&&Array.isArray(e.exercise)&&e.exercise.forEach(e=>{e.title&&r.push({id:e.uid||e._id||"",name:e.title||"",sets:e.sets||0,reps:e.reps?.toString()||"0",restSeconds:e.rest_duration?60*e.rest_duration:30,notes:e.notes||void 0,videoUrl:e.tutorial?.url||void 0})})});let t=e.image?.url||"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=800&h=600&fit=crop";return{id:e.uid||e._id||"",title:e.title||"",description:e.description||"",muscleGroups:e.muscle_groups||[],difficulty:e.difficulty||"beginner",duration:e.duration||0,equipment:e.equipment||[],calories:e.calories||0,videoUrl:e.video_url||void 0,thumbnailUrl:t,exercises:r,tags:e.tags||[],createdAt:e.created_at||new Date().toISOString(),updatedAt:e.updated_at||new Date().toISOString()}}(o)}catch(e){throw console.error("Error fetching workout from Contentstack:",e),e}},c=async()=>{try{let e=i();if(!e.apiKey||!e.deliveryToken||!e.environment)throw console.error("Contentstack configuration missing:",e),Error("Contentstack configuration is missing. Please check your environment variables.");let r=e.apiKey,t=e.deliveryToken,a=e.environment,n=await fetch(`https://cdn.contentstack.io/v3/content_types/meal_plan/entries?environment=${a}&include[]=daily_macros.reference&include[]=meals.breakfast.reference&include[]=meals.lunch.reference&include[]=meals.dinner.reference`,{headers:{api_key:r,access_token:t}});if(!n.ok)throw Error(`Failed to fetch meal plans: ${n.statusText}`);let o=await n.json(),s=o?.entries||[];return(await Promise.all(s.map(async e=>{if(e.daily_macros&&Array.isArray(e.daily_macros)){let n=e.daily_macros.map(async e=>e.reference&&Array.isArray(e.reference)?Promise.all(e.reference.map(async e=>{if(e.uid&&!e.title)try{let n=await fetch(`https://cdn.contentstack.io/v3/content_types/macros/entries/${e.uid}?environment=${a}`,{headers:{api_key:r,access_token:t}});if(n.ok){let r=await n.json();return r?.entry||e}}catch(e){console.error("Error fetching macro:",e)}return e})):[]),i=await Promise.all(n);e.daily_macros=e.daily_macros.map((e,r)=>({...e,reference:i[r]||e.reference}))}if(e.meals){for(let n of["breakfast","lunch","dinner"])if(e.meals[n]?.reference&&Array.isArray(e.meals[n].reference)){let i=e.meals[n].reference.map(async e=>{if(e.uid)try{let n=await fetch(`https://cdn.contentstack.io/v3/content_types/meal/entries/${e.uid}?environment=${a}`,{headers:{api_key:r,access_token:t}});if(n.ok){let r=await n.json();return r?.entry||e}}catch(e){console.error("Error fetching meal:",e)}return e}),o=await Promise.all(i);e.meals[n].reference=o}}return e}))).map(e=>m(e))}catch(e){throw console.error("Error fetching meal plans from Contentstack:",e),e}},l=async e=>{try{let r=i();if(!r.apiKey||!r.deliveryToken||!r.environment)throw console.error("Contentstack configuration missing:",r),Error("Contentstack configuration is missing. Please check your environment variables.");let t=r.apiKey,a=r.deliveryToken,n=r.environment,o=`https://cdn.contentstack.io/v3/content_types/meal_plan/entries/${e}`,s=await fetch(`${o}?environment=${n}&include[]=daily_macros.reference&include[]=meals.breakfast.reference&include[]=meals.lunch.reference&include[]=meals.dinner.reference`,{headers:{api_key:t,access_token:a}});if(!s.ok){if(404===s.status)return null;throw Error(`Failed to fetch meal plan: ${s.statusText}`)}let c=await s.json(),l=c?.entry;if(!l)return null;if(l.daily_macros&&Array.isArray(l.daily_macros)){let e=l.daily_macros.map(async e=>e.reference&&Array.isArray(e.reference)?Promise.all(e.reference.map(async e=>{if(e.uid&&!e.title)try{let r=await fetch(`https://cdn.contentstack.io/v3/content_types/macros/entries/${e.uid}?environment=${n}`,{headers:{api_key:t,access_token:a}});if(r.ok){let t=await r.json();return t?.entry||e}}catch(e){console.error("Error fetching macro:",e)}return e})):[]),r=await Promise.all(e);l.daily_macros=l.daily_macros.map((e,t)=>({...e,reference:r[t]||e.reference}))}if(l.meals){for(let e of["breakfast","lunch","dinner"])if(l.meals[e]?.reference&&Array.isArray(l.meals[e].reference)){let r=l.meals[e].reference.map(async e=>{if(e.uid)try{let r=await fetch(`https://cdn.contentstack.io/v3/content_types/meal/entries/${e.uid}?environment=${n}`,{headers:{api_key:t,access_token:a}});if(r.ok){let t=await r.json();return t?.entry||e}}catch(e){console.error("Error fetching meal:",e)}return e}),i=await Promise.all(r);l.meals[e].reference=i}}return m(l)}catch(e){throw console.error("Error fetching meal plan from Contentstack:",e),e}};function m(e){let r={protein:0,carbs:0,fat:0,fiber:0};e.daily_macros&&Array.isArray(e.daily_macros)&&e.daily_macros.forEach(e=>{e.reference&&Array.isArray(e.reference)&&e.reference.forEach(e=>{if(e.title&&void 0!==e.value){let t=e.title.toLowerCase();"protein"===t?r.protein=e.value:"carbs"===t||"carbohydrates"===t?r.carbs=e.value:"fat"===t?r.fat=e.value:"fiber"===t&&(r.fiber=e.value)}})});let t=e.thumbnail?.url||"https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=800&h=600&fit=crop",a=[];return e.meals?.breakfast?.reference&&Array.isArray(e.meals.breakfast.reference)&&e.meals.breakfast.reference.forEach(e=>{(e.title||e.uid)&&a.push({id:e.uid||"",name:e.title||"",type:"breakfast",calories:e.calories||0,macros:{protein:e.macros?.protein||0,carbs:e.macros?.carbs||0,fat:e.macros?.fat||0},ingredients:e.ingredients||[],prepTime:e.prep_time||0,cookTime:e.cook_time||0,imageUrl:e.image?.url||"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&h=600&fit=crop"})}),e.meals?.lunch?.reference&&Array.isArray(e.meals.lunch.reference)&&e.meals.lunch.reference.forEach(e=>{(e.title||e.uid)&&a.push({id:e.uid||"",name:e.title||"",type:"lunch",calories:e.calories||0,macros:{protein:e.macros?.protein||0,carbs:e.macros?.carbs||0,fat:e.macros?.fat||0},ingredients:e.ingredients||[],prepTime:e.prep_time||0,cookTime:e.cook_time||0,imageUrl:e.image?.url||"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&h=600&fit=crop"})}),e.meals?.dinner?.reference&&Array.isArray(e.meals.dinner.reference)&&e.meals.dinner.reference.forEach(e=>{(e.title||e.uid)&&a.push({id:e.uid||"",name:e.title||"",type:"dinner",calories:e.calories||0,macros:{protein:e.macros?.protein||0,carbs:e.macros?.carbs||0,fat:e.macros?.fat||0},ingredients:e.ingredients||[],prepTime:e.prep_time||0,cookTime:e.cook_time||0,imageUrl:e.image?.url||"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&h=600&fit=crop"})}),{id:e.uid||e._id||"",title:e.title||"",description:e.description||"",dietType:e.diet_type||"balanced",macros:r,allergyTags:e.allergy_tags||[],meals:a,totalCalories:e.total_calories||0,thumbnailUrl:t,createdAt:e.created_at||new Date().toISOString(),updatedAt:e.updated_at||new Date().toISOString()}}let d=function(){let{apiKey:e,deliveryToken:r,environment:t}=i();if(console.debug("[contentstack] initContentstack() called",{apiKey:e,deliveryToken:r,environment:t}),!e||!r||!t)return console.error("Contentstack configuration missing. Check environment variables."),n=null,null;try{return n=a.ZP.stack({apiKey:e,deliveryToken:r,environment:t}),console.info("Contentstack stack initialized successfully."),n}catch(e){return console.error("Failed to initialize Contentstack stack:",e),n=null,null}}();console.debug("[contentstack] Module loaded, stack initialized:",null!==d)}};